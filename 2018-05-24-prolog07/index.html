<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>PROLOG - Part 7 | barbie's notes</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.1"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">PROLOG - Part 7</h1><a id="logo" href="/.">barbie's notes</a><p class="description">my not-professional-at-all blog</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> start</i></a><a href="/archives/"><i class="fa fa-archive"> oldies</i></a><a href="/about/"><i class="fa fa-user"> /me</i></a><a href="/talks/"><i class="fa fa-users"> IRL</i></a><a href="/credits/"><i class="fa fa-heart"> credits</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">PROLOG - Part 7</h1><div class="post-meta">2018-05-23<span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 509</span><span class="post-meta-item-text"> Words</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i><span class="post-count"> 3</span><span class="post-meta-item-text"> Minutes</span></span></span></div><div class="post-content"><blockquote>
<p>Because proofs are boring. That is a given!</p>
</blockquote>
<h2 id="Controlling-PROLOG"><a href="#Controlling-PROLOG" class="headerlink" title="Controlling PROLOG"></a>Controlling PROLOG</h2><p>In my <a href="/2018-04-15-prolog06">last post</a> I introduced the concept of <em>backtracking</em> and as promised, this time I will be writing about <strong>cut</strong>, <strong>fail</strong> and <strong>repeat</strong>.</p>
<h2 id="Cut"><a href="#Cut" class="headerlink" title="Cut"></a>Cut</h2><p>There are two main reasons to understand and use the <em>cut</em> feature:</p>
<a id="more"></a>
<ul>
<li>performance: the program will be faster, because PROLOG will not try to satisfy clauses or facts that the programmer knows they are not going to be satisfiable.</li>
<li>resources: the program needs less memory, as the <em>backtracking</em> branching points before the <em>cut</em> don’t need to be stored.</li>
</ul>
<h3 id="Cut-types"><a href="#Cut-types" class="headerlink" title="Cut types:"></a>Cut types:</h3><p>There are two types of <em>cut</em>:</p>
<ul>
<li>GREEN cut: this is normally used just for better performance, the cases are removed and the found solutions / instances can not be changed.</li>
<li>RED cut: the program doesn’t have the same solutions but it will have an anomalous behaviour.</li>
</ul>
<h3 id="Using-cut"><a href="#Using-cut" class="headerlink" title="Using cut"></a>Using <em>cut</em></h3><p>It is important to know that <em>cut</em> is not a logic predicate. It is in fact just a tool to interfere in the semantics of the program procedure. The <em>cut</em> “cuts” some of the ramifications from the search tree. This way, the predicates before the <em>cut</em>  are going to be instantiated just once. Example:</p>
<pre class="line-numbers language-bash"><code class="language-bash">x :- p, <span class="token operator">!</span>, q.
x :- r.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>This would be a simple way to write <code>if p then q else r</code> for those more familiar with imperative languages.</p>
<h2 id="Fail"><a href="#Fail" class="headerlink" title="Fail"></a>Fail</h2><p>Prolog has two pre-defined predicates <em>true</em> and <em>fail</em>, where <em>true</em> always succeed and <em>fail</em> always fails. Easy, right? ;)</p>
<p>Consider that one has the following problem to model: ‘Susan likes all fruits but apples’. To do it in PROLOG, we can ‘break’ it in smaller pieces of information. Let’s start with the easiest part and write ‘Susan likes all fruits’, in PROLOG:</p>
<pre class="line-numbers language-bash"><code class="language-bash">like<span class="token punctuation">(</span>susan,X<span class="token punctuation">)</span> :- fruit<span class="token punctuation">(</span>X<span class="token punctuation">)</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>So now, we need to exclude the apples. For that, we first check if X is apple. If it is true, then we fail the ‘Susan likes X’ rule. In PROLOG:</p>
<pre class="line-numbers language-bash"><code class="language-bash">like<span class="token punctuation">(</span>susan,X<span class="token punctuation">)</span> :- apple<span class="token punctuation">(</span>X<span class="token punctuation">)</span>, fail.
like<span class="token punctuation">(</span>susan,X<span class="token punctuation">)</span> :- fruit<span class="token punctuation">(</span>X<span class="token punctuation">)</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>Using <em>cut</em> with <em>fail</em> together is possible to implement negation, as one can see in the example below:</p>
<pre class="line-numbers language-bash"><code class="language-bash">not X :- X, <span class="token operator">!</span>, fail.
not X.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>so <code>not X</code> fails if X has no solution, that means, if X is true.</p>
<p>And also makes our first example faster, eliminating the backtracking when something is never true. Try:</p>
<pre class="line-numbers language-bash"><code class="language-bash">like<span class="token punctuation">(</span>susan,X<span class="token punctuation">)</span> :- apple<span class="token punctuation">(</span>X<span class="token punctuation">)</span>, <span class="token operator">!</span>, fail.
like<span class="token punctuation">(</span>susan,X<span class="token punctuation">)</span> :- fruit<span class="token punctuation">(</span>X<span class="token punctuation">)</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h2 id="Repeat"><a href="#Repeat" class="headerlink" title="Repeat"></a>Repeat</h2><p>It is also pretty straight forward: it repeats the rule until the next rule is true or valid. For example:</p>
<pre class="line-numbers language-bash"><code class="language-bash">checkchar<span class="token punctuation">(</span>X<span class="token punctuation">)</span> :- repeat, get0<span class="token punctuation">(</span>X<span class="token punctuation">)</span>.
getchar<span class="token punctuation">(</span>X<span class="token punctuation">)</span> :- checkchar<span class="token punctuation">(</span>X<span class="token punctuation">)</span>, X <span class="token operator">></span> 32, <span class="token operator">!</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><code>checkchar</code> will be repeated until it gets a printable input.</p>
<blockquote>
<p>Be aware that <em>cut</em> has side effects and the use of it can lead to not desirable results. Double check the order of your rules and if you are not sure, try to solve your problem with lists and recursion. It also helps to draw the search tree sometimes! =)</p>
</blockquote>
<p>The <a href="/2018-06-09-prolog08">next post</a> will be a bit more theoretical and technical again, so that we can get our hands really dirty afterwards!</p>
</div><div class="post-copyright"><script type="text/javascript" src="/js/copyright.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copyright.css"><p>this has been written by me for fun purposes, don't take it serious!</p></div><br><div class="tags"><a href="/tags/prolog/"><i class="fa fa-tag"></i>prolog</a></div><div class="post-nav"><a class="pre" href="/2018-06-09-prolog08/">PROLOG - Part 8</a><a class="next" href="/2018-04-15-prolog06/">PROLOG - Part 6</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/firmware/" style="font-size: 15px;">firmware</a> <a href="/tags/low-level/" style="font-size: 15px;">low level</a> <a href="/tags/platform/" style="font-size: 15px;">platform</a> <a href="/tags/SMM/" style="font-size: 15px;">SMM</a> <a href="/tags/prolog/" style="font-size: 15px;">prolog</a> <a href="/tags/haskell/" style="font-size: 15px;">haskell</a> <a href="/tags/binary-analysis/" style="font-size: 15px;">binary analysis</a> <a href="/tags/reversing/" style="font-size: 15px;">reversing</a> <a href="/tags/hardware/" style="font-size: 15px;">hardware</a> <a href="/tags/smt-solvers/" style="font-size: 15px;">smt solvers</a> <a href="/tags/malware/" style="font-size: 15px;">malware</a> <a href="/tags/talks/" style="font-size: 15px;">talks</a> <a href="/tags/bios/" style="font-size: 15px;">bios</a> <a href="/tags/research/" style="font-size: 15px;">research</a> <a href="/tags/science/" style="font-size: 15px;">science</a> <a href="/tags/misc/" style="font-size: 15px;">misc</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020-06-19-how-to-research/">How Do I Do Research?</a></li><li class="post-list-item"><a class="post-list-link" href="/2019-08-15-system-managing-god/">SMMMmmmm - when root is not enough</a></li><li class="post-list-item"><a class="post-list-link" href="/2019-04-28-first-steps-into-the-bios/">Learning about the BIOS</a></li><li class="post-list-item"><a class="post-list-link" href="/2018-10-03-logicvsmalware/">Logic & binaries</a></li><li class="post-list-item"><a class="post-list-link" href="/2018-08-03-firmware_101/">Firmware 101 - How to get the code</a></li><li class="post-list-item"><a class="post-list-link" href="/2018-07-23-hardware_101/">Hardware 101 - I have this $device... and now?</a></li><li class="post-list-item"><a class="post-list-link" href="/2018-07-20-genRE/">/me on reverse engineering</a></li><li class="post-list-item"><a class="post-list-link" href="/2018-07-06-memory_skrolli/">Tinkering the memory</a></li><li class="post-list-item"><a class="post-list-link" href="/2018-07-03-hsandprolog/">Prolog vs Haskell</a></li><li class="post-list-item"><a class="post-list-link" href="/2018-06-09-prolog08/">PROLOG - Part 8</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2023 <a href="/." rel="nofollow">barbie's notes.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.1" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.1" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/love.js"></script><script type="text/javascript" src="/js/copycode.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.1"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.1"></script></div></body></html>