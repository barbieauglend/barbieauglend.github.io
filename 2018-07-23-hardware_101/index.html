<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Hardware 101 - I have this $device... and now? | barbie's notes</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.1"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Hardware 101 - I have this $device... and now?</h1><a id="logo" href="/.">barbie's notes</a><p class="description">my not-professional-at-all blog</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> start</i></a><a href="/archives/"><i class="fa fa-archive"> oldies</i></a><a href="/about/"><i class="fa fa-user"> /me</i></a><a href="/talks/"><i class="fa fa-users"> IRL</i></a><a href="/credits/"><i class="fa fa-heart"> credits</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Hardware 101 - I have this $device... and now?</h1><div class="post-meta">2018-07-22<span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 955</span><span class="post-meta-item-text"> Words</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i><span class="post-count"> 5</span><span class="post-meta-item-text"> Minutes</span></span></span></div><div class="post-content"><h2 id="Understanding-your-device"><a href="#Understanding-your-device" class="headerlink" title="Understanding your device"></a>Understanding your device</h2><h3 id="First-of-all-Look-for-Debug-Ports"><a href="#First-of-all-Look-for-Debug-Ports" class="headerlink" title="First of all: Look for Debug Ports"></a>First of all: Look for Debug Ports</h3><p>In fact, this should be the step zero step. I mean, you’ve got a wonderful piece of hardware but how do you communicate with it? To find all the available connections, I usually make a list of all physical ports I can access, I count all the pins I see and so on, always keeping in my mind that I want a <em>debug port</em>. The debug port is usually the one used to program the device at the factory and is sometimes left available for technical support and repair reasons.</p>
<a id="more"></a>
<p>This port is found on many embedded device: from printers to security cameras, from smart toasters to routers. Another important fact: everything gets easier, if we are handling a “complex” embedded system, as the probability of the system is running some Linux kernel increases - and Linux kernel is Open Source :D remember? But anyway, if you can’t see any debug port right away, don’t give up! Sometimes they are kind of hidden and you may or may not need to break some seals and void some warranties! ;)</p>
<p>Debug ports are often serial ports, UART, and usually look like bundles of 4 or 6 pins. Sometimes, they are even labelled as debug ports, right on the PCB, just waiting for you to poke it. As they are mostly made for technical support, they are usually unprotected, sometimes you even have pin headers waiting for you to plug a cable. Otherwise, the pads (ie the small holes in the PCB where you can solder your components) will be unprotected and not connected to any device.</p>
<p>So, find the unused pads and solder some pin headers. If your PCB has more than one IC(chip?), check if you can find the main one and solder your pin headers on that debug port. The main chip is usually where you find the most important data. I always try to solder some pin headers to facilitate my access to the board.</p>
<h3 id="Understand-the-Transmission-Protocol"><a href="#Understand-the-Transmission-Protocol" class="headerlink" title="Understand the Transmission Protocol"></a>Understand the Transmission Protocol</h3><p>It is also important to understand how the communication protocol works. The <em>UART</em> communication protocol (Universal Asynchronous Receiver / Transmitter) is different than other common protocols like I2C basically for being a physical circuit in the microcontroller with just one function: transfer and receive data in a serial form. The good side of it is, since it is not a general purpose protocol like USB, it is possible to exchange data using only two wires. This kind of communication is called direct.</p>
<p>The data is transferred from the Tx (Transmitting) pin which is the source to the Rx pin (Receiving) to the destination, as illustrated in the pinout diagram below:</p>
<pre class="line-numbers language-text"><code class="language-text">+-------+        +-------+
|       |        |       |
|    Tx +--    --> Tx    |
|       |  `..'  |       |
|    Rx +--.'`.--> Rx    |
|       |        |       |
|   GND +--------+ GND   |
|       |        |       |
+-------+        +-------+
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>As the name suggests, the data transfer in UART is asynchronous, meaning that there is no clock tick available to synchronize the data sent and received. Instead, the source adds signal bits in the beginning and in the end of each data package sent. These bits are going to define the beginning and the end of a data package so that the destination understands where to start and where to end the reading process.</p>
<p>When the destination receives an initial bit, it starts to read the received data using a rate called <em>baud rate</em>. This baud rate is the data transfer rate in bps (bits per second) and both devices should be using the same rate (max 10% error) and data structure.</p>
<h3 id="Finding-the-Pinout"><a href="#Finding-the-Pinout" class="headerlink" title="Finding the Pinout"></a>Finding the Pinout</h3><p>The UART port can have two different pin layout. The 4-pin version have the following pins:</p>
<ul>
<li>Tx: this pin will be connected with the Rx of our receiver. Often have a value of 1 / true / on by default.</li>
<li>Rx: this pin will be connected with the TX of our receiver. Often have a value of 1 / true / on by default.</li>
<li>Vcc: POWER \o/ DO NOT CONNECT! Usually 3.3V or 5V.</li>
<li>GND: aka Ground Pin, this pin will be connected with the GND of our receiver.</li>
</ul>
<p>The 6-pin version includes two optional pins DTR and CTS. I will probably write about them later on this series. :)</p>
<h3 id="Get-your-Multimeter"><a href="#Get-your-Multimeter" class="headerlink" title="Get your Multimeter!"></a>Get your Multimeter!</h3><p>Of course, you can just put wires between all free pads you can see - “trial &amp; error” is also a method. ;) But depending on the device you want to understand, it can become pretty expensive. I usually prefer to analyze the board a bit further before sending random signals and put everything on fire - been there, done that! Not fun!</p>
<p>It is easier than you expect. A simple multimeter is enough to get most of the important information about our board. BUT you will NEVER hear me say “no” to an oscilloscope. :) The oscilloscope will show us exactly what’s happening on the electrical level so we can deduce which pin is what.</p>
<ul>
<li>The pin with a constant value of 0V is our GND.</li>
<li>The pin with a constant value of 3.3V or 5V should be our Vcc.</li>
<li>One of the pins with a <a href="https://en.wikipedia.org/wiki/Floating-point_arithmetic" target="_blank" rel="noopener">floating value</a> close to 0V should be our Rx.<ul>
<li>(Makes sense? No? Think about Rx as a disconnected “listening” port)</li>
</ul>
</li>
</ul>
<p>Yay! Now that we know which pin is what, we just need to find out the <em>baud rate</em> to configure our receiver. For that, the easiest way is to use a <a href="https://en.wikipedia.org/wiki/Logic_analyzer" target="_blank" rel="noopener">logic analyzer</a>. Connect your pins, start the option “Protocol analysis” and guess :) just keep increasing / decreasing the <em>baud rate</em> value until you start seeing plain text in the serial output.</p>
<p>With the pinout and the baud rate we can start <a href="/2018-08-03-firmware_101">communicating with our device</a>! \o/</p>
<hr>
<p>Post written originally in pt_br as a <a href="https://www.mentebinaria.com.br/artigos/revertendo-firmware-por-onde-come%C3%A7ar-r36/" target="_blank" rel="noopener">guest post to Mente Binaria</a> and it wouldn’t be here without the precious help of <a href="https://twitter.com/_kylma" target="_blank" rel="noopener">Kylma</a>.</p>
</div><div class="post-copyright"><script type="text/javascript" src="/js/copyright.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copyright.css"><p>this has been written by me for fun purposes, don't take it serious!</p></div><br><div class="tags"><a href="/tags/reversing/"><i class="fa fa-tag"></i>reversing</a><a href="/tags/hardware/"><i class="fa fa-tag"></i>hardware</a></div><div class="post-nav"><a class="pre" href="/2018-08-03-firmware_101/">Firmware 101 - How to get the code</a><a class="next" href="/2018-07-20-genRE/">/me on reverse engineering</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/firmware/" style="font-size: 15px;">firmware</a> <a href="/tags/low-level/" style="font-size: 15px;">low level</a> <a href="/tags/platform/" style="font-size: 15px;">platform</a> <a href="/tags/SMM/" style="font-size: 15px;">SMM</a> <a href="/tags/prolog/" style="font-size: 15px;">prolog</a> <a href="/tags/haskell/" style="font-size: 15px;">haskell</a> <a href="/tags/binary-analysis/" style="font-size: 15px;">binary analysis</a> <a href="/tags/reversing/" style="font-size: 15px;">reversing</a> <a href="/tags/hardware/" style="font-size: 15px;">hardware</a> <a href="/tags/smt-solvers/" style="font-size: 15px;">smt solvers</a> <a href="/tags/malware/" style="font-size: 15px;">malware</a> <a href="/tags/talks/" style="font-size: 15px;">talks</a> <a href="/tags/bios/" style="font-size: 15px;">bios</a> <a href="/tags/research/" style="font-size: 15px;">research</a> <a href="/tags/science/" style="font-size: 15px;">science</a> <a href="/tags/misc/" style="font-size: 15px;">misc</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020-06-19-how-to-research/">How Do I Do Research?</a></li><li class="post-list-item"><a class="post-list-link" href="/2019-08-15-system-managing-god/">SMMMmmmm - when root is not enough</a></li><li class="post-list-item"><a class="post-list-link" href="/2019-04-28-first-steps-into-the-bios/">Learning about the BIOS</a></li><li class="post-list-item"><a class="post-list-link" href="/2018-10-03-logicvsmalware/">Logic & binaries</a></li><li class="post-list-item"><a class="post-list-link" href="/2018-08-03-firmware_101/">Firmware 101 - How to get the code</a></li><li class="post-list-item"><a class="post-list-link" href="/2018-07-23-hardware_101/">Hardware 101 - I have this $device... and now?</a></li><li class="post-list-item"><a class="post-list-link" href="/2018-07-20-genRE/">/me on reverse engineering</a></li><li class="post-list-item"><a class="post-list-link" href="/2018-07-06-memory_skrolli/">Tinkering the memory</a></li><li class="post-list-item"><a class="post-list-link" href="/2018-07-03-hsandprolog/">Prolog vs Haskell</a></li><li class="post-list-item"><a class="post-list-link" href="/2018-06-09-prolog08/">PROLOG - Part 8</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2023 <a href="/." rel="nofollow">barbie's notes.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.1" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.1" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/love.js"></script><script type="text/javascript" src="/js/copycode.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.1"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.1"></script></div></body></html>