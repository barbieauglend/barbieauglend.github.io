<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>PROLOG - Part 6 | barbie's notes</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.1"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">PROLOG - Part 6</h1><a id="logo" href="/.">barbie's notes</a><p class="description">my not-professional-at-all blog</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> start</i></a><a href="/archives/"><i class="fa fa-archive"> oldies</i></a><a href="/about/"><i class="fa fa-user"> /me</i></a><a href="/talks/"><i class="fa fa-users"> IRL</i></a><a href="/credits/"><i class="fa fa-heart"> credits</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">PROLOG - Part 6</h1><div class="post-meta">2018-04-14<span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 503</span><span class="post-meta-item-text"> Words</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i><span class="post-count"> 3</span><span class="post-meta-item-text"> Minutes</span></span></span></div><div class="post-content"><blockquote>
<p>Logic: The art of thinking and reasoning in strict accordance with the limitations and incapacities of the human misunderstanding.  Ambrose Bierce</p>
</blockquote>
<h2 id="Power-PROLOG-o"><a href="#Power-PROLOG-o" class="headerlink" title="Power PROLOG \o/"></a>Power PROLOG \o/</h2><p>In my <a href="/2018-04-10-prolog05">last post</a> we finally wrote our “Hello World!” in PROLOG. I hope you all bare with me, so we can finally start to explore the fun and powerful features of PROLOG. In this post, I am going to write about Backtracking.</p>
<h2 id="Backtracking"><a href="#Backtracking" class="headerlink" title="Backtracking"></a>Backtracking</h2><p>When PROLOG is looking for instances that satisfies a clause, it will, whenever it is needed, perform what we call <strong>Backtrack</strong>. <a id="more"></a> This is an automated concept which makes PROLOG a powerful language, as the programmer doesn’t need to implement it. <em>Warning</em>: the use of backtracking without understanding the internals of PROLOG can cost lots of resources and make the code inefficient.</p>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example:"></a>Example:</h3><p>Let’s create a new file called <code>relationships.pl</code> with the following facts like this:</p>
<pre class="line-numbers language-prolog"><code class="language-prolog"><span class="token function">like</span><span class="token punctuation">(</span>maria<span class="token punctuation">,</span> food<span class="token punctuation">)</span><span class="token operator">.</span>
<span class="token function">like</span><span class="token punctuation">(</span>maria<span class="token punctuation">,</span> wine<span class="token punctuation">)</span><span class="token operator">.</span>
<span class="token function">like</span><span class="token punctuation">(</span>john<span class="token punctuation">,</span> wein<span class="token punctuation">)</span><span class="token operator">.</span>
<span class="token function">like</span><span class="token punctuation">(</span>john<span class="token punctuation">,</span> maria<span class="token punctuation">)</span><span class="token operator">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>and then we do the following query:</p>
<pre class="line-numbers language-bash"><code class="language-bash">?- consult<span class="token punctuation">(</span><span class="token string">"relationships.pl"</span><span class="token punctuation">)</span>.
true.

?- like<span class="token punctuation">(</span>maria,X<span class="token punctuation">)</span>, like<span class="token punctuation">(</span>john, X<span class="token punctuation">)</span>.
X <span class="token operator">=</span> wine <span class="token punctuation">;</span>
false.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>How does PROLOG check it? To better understand backtracking - and also the data flow for the query - you can use the command <code>trace</code>:</p>
<pre class="line-numbers language-bash"><code class="language-bash">?- trace.
true.
<span class="token punctuation">[</span>trace<span class="token punctuation">]</span>  ?-<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>Now we have the new command line inside the trace environment. Just do the same query again:</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">[</span>trace<span class="token punctuation">]</span>  ?- like<span class="token punctuation">(</span>maria,X<span class="token punctuation">)</span>, like<span class="token punctuation">(</span>john, X<span class="token punctuation">)</span>.
   Call: <span class="token punctuation">(</span>9<span class="token punctuation">)</span> like<span class="token punctuation">(</span>maria, _7168<span class="token punctuation">)</span> ? creep
   Exit: <span class="token punctuation">(</span>9<span class="token punctuation">)</span> like<span class="token punctuation">(</span>maria, food<span class="token punctuation">)</span> ? creep
   Call: <span class="token punctuation">(</span>9<span class="token punctuation">)</span> like<span class="token punctuation">(</span>john, food<span class="token punctuation">)</span> ? creep
   Fail: <span class="token punctuation">(</span>9<span class="token punctuation">)</span> like<span class="token punctuation">(</span>john, food<span class="token punctuation">)</span> ? creep
   Redo: <span class="token punctuation">(</span>9<span class="token punctuation">)</span> like<span class="token punctuation">(</span>maria, _7168<span class="token punctuation">)</span> ? creep
   Exit: <span class="token punctuation">(</span>9<span class="token punctuation">)</span> like<span class="token punctuation">(</span>maria, wine<span class="token punctuation">)</span> ? creep
   Call: <span class="token punctuation">(</span>9<span class="token punctuation">)</span> like<span class="token punctuation">(</span>john, wine<span class="token punctuation">)</span> ? creep
   Exit: <span class="token punctuation">(</span>9<span class="token punctuation">)</span> like<span class="token punctuation">(</span>john, wine<span class="token punctuation">)</span> ? creep
X <span class="token operator">=</span> wine <span class="token punctuation">;</span>
   Redo: <span class="token punctuation">(</span>9<span class="token punctuation">)</span> like<span class="token punctuation">(</span>john, wine<span class="token punctuation">)</span> ? creep
   Fail: <span class="token punctuation">(</span>9<span class="token punctuation">)</span> like<span class="token punctuation">(</span>john, wine<span class="token punctuation">)</span> ? creep
false.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>As we can see, first <code>like(maria,X).</code>was checked;</li>
<li>X is instantiated with the value <code>food</code>.</li>
<li>Then PROLOG will check, if the second clausel is also <code>true</code> for <code>X = food</code>.</li>
<li>As there is no clause <code>like(john,food).</code> this instance for X will fail.</li>
<li>In this moment, <em>backtracking</em> happens and X is un instantiated.</li>
<li>PROLOG will try to find an instance of <code>like(maria,X)</code> where <code>X != food</code>.</li>
<li>The first clause is instantiated with <code>wein</code>.</li>
<li>PROLOG will check, if the second clause is also true for <code>X = wein</code>.</li>
<li>As there is the clause <code>like(john, wine).</code>in our file, the user (we!) are notified.</li>
<li>We want to see other possibilities - we type <code>;</code></li>
</ul>
<p>Always when a clause fails, backtrack will happen and the instantiated variables in that clause will be cleared, but the variables instantiated before that clause will be kept. Also when a  solution is found and the user (we again!) wants to see another solution, the variables that were instantiated in the last clause will be freed and the proofing process will be restarted after the actual situation.</p>
<p>As one can see, this can become a really expensive process. In order to control the data flow, there is a special mechanism called <strong>cut</strong>. This is going to be my <a href="/2018-05-24-prolog07">next post</a>!</p>
</div><div class="post-copyright"><script type="text/javascript" src="/js/copyright.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copyright.css"><p>this has been written by me for fun purposes, don't take it serious!</p></div><br><div class="tags"><a href="/tags/prolog/"><i class="fa fa-tag"></i>prolog</a></div><div class="post-nav"><a class="pre" href="/2018-05-24-prolog07/">PROLOG - Part 7</a><a class="next" href="/2018-04-10-prolog05/">PROLOG - Part 5</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/prolog/" style="font-size: 15px;">prolog</a> <a href="/tags/low-level/" style="font-size: 15px;">low level</a> <a href="/tags/platform/" style="font-size: 15px;">platform</a> <a href="/tags/SMM/" style="font-size: 15px;">SMM</a> <a href="/tags/haskell/" style="font-size: 15px;">haskell</a> <a href="/tags/firmware/" style="font-size: 15px;">firmware</a> <a href="/tags/binary-analysis/" style="font-size: 15px;">binary analysis</a> <a href="/tags/reversing/" style="font-size: 15px;">reversing</a> <a href="/tags/hardware/" style="font-size: 15px;">hardware</a> <a href="/tags/smt-solvers/" style="font-size: 15px;">smt solvers</a> <a href="/tags/malware/" style="font-size: 15px;">malware</a> <a href="/tags/talks/" style="font-size: 15px;">talks</a> <a href="/tags/research/" style="font-size: 15px;">research</a> <a href="/tags/science/" style="font-size: 15px;">science</a> <a href="/tags/misc/" style="font-size: 15px;">misc</a> <a href="/tags/bios/" style="font-size: 15px;">bios</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020-06-19-how-to-research/">How Do I Do Research?</a></li><li class="post-list-item"><a class="post-list-link" href="/2019-08-15-system-managing-god/">SMMMmmmm - when root is not enough</a></li><li class="post-list-item"><a class="post-list-link" href="/2019-04-28-first-steps-into-the-bios/">Learning about the BIOS</a></li><li class="post-list-item"><a class="post-list-link" href="/2018-10-03-logicvsmalware/">Logic & binaries</a></li><li class="post-list-item"><a class="post-list-link" href="/2018-08-03-firmware_101/">Firmware 101 - How to get the code</a></li><li class="post-list-item"><a class="post-list-link" href="/2018-07-23-hardware_101/">Hardware 101 - I have this $device... and now?</a></li><li class="post-list-item"><a class="post-list-link" href="/2018-07-20-genRE/">/me on reverse engineering</a></li><li class="post-list-item"><a class="post-list-link" href="/2018-07-06-memory_skrolli/">Tinkering the memory</a></li><li class="post-list-item"><a class="post-list-link" href="/2018-07-03-hsandprolog/">Prolog vs Haskell</a></li><li class="post-list-item"><a class="post-list-link" href="/2018-06-09-prolog08/">PROLOG - Part 8</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2025 <a href="/." rel="nofollow">barbie's notes.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.1" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.1" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/love.js"></script><script type="text/javascript" src="/js/copycode.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.1"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.1"></script></div></body></html>